<h1 class="mb-4" style="color: #343a40;">Orders</h1>
<% if current_user.admin? %>
  <h2 style="color: #343a40;">All Orders</h2>
<% else %>
  <h2 style="color: #343a40;">Your Orders</h2>
<% end %>
<div class="container">
  <% if @orders.any? %>
    <table class="table table-striped table-bordered" style="color: #212529;">
      <thead class="thead-dark" style="background-color: #343a40; color: white;">
        <tr>
          <th>Order ID</th>
          <th>User</th>
          <th>Total Amount</th>
          <th>Status</th>
          <th>Payment Status</th>
          <th class="text-center">Actions</th>
        </tr>
      </thead>
      <tbody>
        <% @orders.each do |order| %>
          <tr>
            <td><%= order.id %></td>
            <td><%= order.user.name %></td>
            <td><%= number_to_currency(order.total_amount, unit: "", format: "%n BDT") %></td>
            <!-- Order Status with inline color badges -->
            <td>
              <% if order.status == 'pending' %>
                <span class="badge" style="background-color: #ffc107; color: black;">Pending</span>
              <% elsif order.status == 'confirmed' %>
                <span class="badge" style="background-color: #28a745; color: white;">Confirmed</span>
              <% elsif order.status == 'cancelled' %>
                <span class="badge" style="background-color: #dc3545; color: white;">Cancelled</span>
              <% end %>
            </td>
            <!-- Payment Status with inline color badges -->
            <td>
              <% if order.payment_status == 'completed' %>
                <span class="badge" style="background-color: #28a745; color: white;">Completed</span>
              <% elsif order.payment_status == 'pending' %>
                <span class="badge" style="background-color: #007bff; color: white;">Pending</span>
              <% else %>
                <span class="badge" style="background-color: #dc3545; color: white;"><%= order.payment_status.humanize %></span>
              <% end %>
            </td>
            <td class="text-center">
              <%= link_to 'View', order_path(order), class: 'btn btn-info btn-sm', style: 'color: black;' %>
              <% if current_user.admin? %>
                <%= link_to 'Update Order Status', edit_order_path(order), class: 'btn btn-warning btn-sm', style: 'color: black;' %>
                <%= form_with(url: order_path(order), method: :delete, local: true, class: 'd-inline') do %>
                  <%= submit_tag 'Delete', data: { confirm: 'Are you sure?' }, class: 'btn btn-danger btn-sm', style: 'color: white;' %>
                <% end %>
              <% end %>
            </td>
          </tr>
        <% end %>
      </tbody>
    </table>
  <% else %>
    <p class="text-center" style="color: #212529;">No orders found.</p>
  <% end %>
</div>
